define(["wc/has","wc/mixin","wc/urlParser","wc/config","wc/dom/tag"],function(e,t,n,r,i){"use strict";var s=new function(){var o=".css",a=null,c=null,l={edge:"edge",ie11:{test:"trident",version:7}};function u(e){var i=e||r.get("wc/loader/style"),o=l;return null===a&&(a=function(){var e,t,r=s.getMainCss(!0),i="";if(r&&(e=n.parse(r))){if(e.protocol&&(i=e.protocol+"//"),i+=e.host,e.pathnameArray)for(t=0;t<e.pathnameArray.length-1;++t)i+="/"+e.pathnameArray[t];return i+"/"}return""}()),i&&(void 0!==i.css&&(o=i.inherit&&"object"==typeof i.css?t(i.css,o):i.css),void 0!==i.cachebuster&&(c=i.cachebuster)),null===c&&(c=function(){var e,t,r=s.getMainCss(!0);if(r&&(e=n.parse(r))&&(t=e.search))return t.substring(1,t.length);return""}()),o}function f(e,t){var n,r,s,o,a=document;a.querySelector("link[href='"+e+"']")||(o={"data-wc-loader":"style",type:"text/css",rel:"stylesheet",href:e},t&&(o.media=t),n=i.toTag("link",!1,o,!0),s=function(){var e=document.querySelectorAll("link[rel='stylesheet']");if(!e||!e.length)return null;return e[e.length-1]}(),(r=s?s.nextSibling:null)?r.insertAdjacentHTML("afterEnd",n):a.head.insertAdjacentHTML("beforeEnd",n))}function d(e,t){if(!e||e.constructor.prototype===String.prototype)return!0;throw new TypeError("Invalid "+t)}function h(e,t){var n,r=0===e.indexOf("/")||0===e.indexOf("http")||0===e.indexOf(".");if(r)return n=e,void f(e,t);n=a+e,e.indexOf(o)<0&&(n+=o),c&&(n+="?"+c),f(n,t)}this.getMainCss=function(e){var t=document.getElementById("wc_css_screen");return t&&e?t.href:t},this.load=function(t){var n,r,i,s,o,a,c=u(t);if(c)for(a in c)if(c.hasOwnProperty(a))if(n=r=i=null,"string"!=typeof(o=c[a])){if(d(n=o.test,"has test"),d(s=o.name||"wc-"+a,"name"),(r=o.version)&&isNaN(r))throw new TypeError("Invalid version");d(i=o.media,"media query"),n?r||0===r?e(n)<=r&&h(s,i):e(n)&&h(s,i):h(s,i)}else e(o)&&h("wc-"+a)},this.add=function(e,t,n){u(n),h(e,t)}};return s});